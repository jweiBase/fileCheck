# 磁盘空间可视化工具

一款基于 Electron 开发的磁盘空间可视化工具，使用矩形树图（Treemap）方式直观展示文件和文件夹的空间占用情况。

## 功能特性

- **磁盘扫描**：支持扫描任意磁盘路径，自动检测可用磁盘驱动器
- **可视化展示**：使用矩形树图展示文件占用，面积与文件大小成正比
- **多层嵌套**：支持最多3层嵌套显示，大文件夹内部继续细分
- **交互操作**：悬停查看详情，点击跳转到文件位置
- **使用说明**：内置完整的使用指南
- **多语言支持**：支持中文和英文语言切换

## 安装

```bash
# 安装依赖
npm install
```

## 运行

```bash
# 启动应用
npm start
```

## 使用方法

### 1. 选择扫描路径

有两种方式选择要扫描的路径：

- **手动输入**：在输入框中输入完整路径，如 `C:\` 或 `D:\projects`
- **下拉选择**：从磁盘下拉菜单中选择可用的磁盘驱动器

### 2. 开始扫描

点击"开始扫描"按钮，程序将递归扫描指定路径下的所有文件和文件夹。扫描大型磁盘可能需要较长时间，请耐心等待。

### 3. 查看结果

扫描完成后，界面将显示矩形树图：

- **矩形大小**：表示文件/文件夹占用空间大小，越大占用越多
- **颜色区分**：不同颜色代表不同的文件类型/层级
- **边框粗细**：粗边框表示文件夹，细边框表示文件

### 4. 交互操作

- **悬停**：将鼠标悬停在矩形上，显示详细信息（名称、路径、大小）
- **点击**：点击矩形，在系统资源管理器中打开对应文件/文件夹位置

### 5. 查看帮助

点击界面右上角的 `?` 按钮，打开使用说明窗口。

### 6. 语言选择

应用支持中文和英文两种语言，可通过以下方式切换：

- 点击界面右上角的语言选择下拉菜单
- 选择你需要的语言（中文或 English）
- 界面将自动切换到所选语言

语言设置会保存在本地，下次启动时会自动使用上次选择的语言。

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| Enter | 在路径输入框中按回车开始扫描 |
| Esc | 关闭帮助窗口 |

## 注意事项

1. **权限要求**：某些系统文件夹可能需要管理员权限才能访问
2. **扫描时间**：扫描大型磁盘（如整个C盘）可能需要几分钟时间
3. **跳过文件**：无法访问的文件/文件夹会被自动跳过
4. **性能建议**：建议扫描特定文件夹而非整个磁盘以获得更快速度

## 技术栈

- **Electron** - 跨平台桌面应用框架
- **HTML/CSS/JavaScript** - 前端技术
- **Treemap算法** - 空间可视化布局
- **并行处理** - 优化扫描性能
- **缓存机制** - 提高重复扫描速度

## 缓存机制

为了提高重复扫描的速度，本工具实现了缓存机制：

- **缓存原理**：基于文件夹修改时间（mtime）进行增量更新
- **缓存存储位置**：`%APPDATA%\disk-visualizer\scan-cache`（Windows）
- **缓存有效期**：7天
- **手动清除**：界面提供"清除缓存"按钮

### 缓存文件说明

以下文件/目录是生成的本地缓存，**不需要**上传同步：

- `%APPDATA%\disk-visualizer\scan-cache` 目录
- 任何以 `.cache` 结尾的文件

## 项目结构

```
fileCheck/
├── package.json      # 项目配置文件
├── main.js           # Electron主进程
├── preload.js        # 预加载脚本
├── index.html        # 主界面HTML
├── styles.css        # 样式文件
├── renderer.js       # 渲染进程逻辑
├── locales/          # 语言配置文件目录
│   ├── zh-CN.json    # 中文语言包
│   └── en-US.json    # 英文语言包
└── README.md         # 说明文档
```

## 打包

### 安装打包依赖

```bash
# 安装基础依赖
npm install

# 安装打包工具
npm install --save-dev electron-builder
```

### 生成免安装可执行文件

```bash
# 打包应用
npm run dist
```

### 重新生成可执行文件

当你修改了代码后，执行以下命令重新生成可执行文件：

```bash
# 清理旧的构建文件（可选）
rm -rf dist

# 重新打包
npm run dist
```

### 打包结果

打包完成后，可执行文件将位于以下目录：

```
dist/win-unpacked/磁盘空间可视化工具.exe
```

这是一个免安装的可执行文件，你可以直接双击运行。

## 许可证

MIT License
